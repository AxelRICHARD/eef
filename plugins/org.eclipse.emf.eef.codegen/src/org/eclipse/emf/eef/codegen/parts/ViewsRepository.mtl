[comment 
 *******************************************************************************
 * Copyright (c) 2008-2009 Obeo.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 * 
 * Contributors:
 *     Obeo - initial API and implementation
 *******************************************************************************
 /]
[module ViewsRepository('http://www.eclipse.org/emf/eef/views/1.0.0','http://www.eclipse.org/emf/eef/components/1.0.0','http://www.eclipse.org/emf/2002/Ecore', 'http://www.eclipse.org/emf/eef/generation/1.0.0')/]

[import common /]
[import naming /]

[comment 
 This template will generate a file for each ViewRepository in the EEF model.
 /]
[template public ViewsRepository(viewRepository : ViewsRepository)]
[comment @main /]
[file (viewRepository.fullFilePath(), false)]
[viewRepository.associatedGenModel().licenceText().trim()/]
package [viewRepository.partsPackage()/];

/**
 * [viewRepository.associatedGenModel().authorText().trim()/]
 */
public class [viewRepository.vrClass()/] {

	public static final int SWT_KIND = 0;

	public static final int FORM_KIND = 1;

[viewRepository.viewDescriptors()/]
}
[/file]
[/template]

[comment 
 Template used to call recursively on the viewRepository to get views
 /]
[template public viewDescriptors(viewRepository : ViewsRepository)]
[for (view : View | viewRepository.views)]
[view.viewDescriptor()/]
[/for]
[for (category : Category | viewRepository.eAllContents(views::Category))]
[for (view : View |category.views )]
[view.viewDescriptor()/]
[/for]
[/for]
[/template]

[comment  Template used to generate code for each views /]
[template public viewDescriptor(view : View)]

	/**
	 * [view.name/] view descriptor
	 */
	public static class [view.name.toJavaClassifier()/] {
[if (view.oclIsTypeOf(views::CustomView))]

		// [protected ('for '.concat(view.name).concat(' keys'))]
		
		// [/protected]

[else]
[for (viewElement : ViewElement | view.elements)]
	[viewElement.viewElementDescriptor()/]
[/for]
[/if]
	}
[/template]

[comment 
 Template used to generate code for each elementEditor. it calls recursively on the content of each viewElement
 /]
[template public viewElementDescriptor(viewElement : ViewElement)]
[if (viewElement.oclIsTypeOf(views::ElementEditor))]
public static String [viewElement.oclAsType(views::ElementEditor).name.toJavaIdentifier()/] = "[viewElement.oclAsType(views::ElementEditor).qualifiedIdentifier/]";	
[elseif (viewElement.oclIsTypeOf(views::CustomElementEditor))]
// [protected ('for '.concat(viewElement.name).concat(' ElementEditor key'))]

// [/protected]
[elseif (viewElement.oclIsTypeOf(views::Container))]
[for (ve : ViewElement | viewElement.oclAsType(views::Container).elements)]
	[ve.viewElementDescriptor()/]
[/for]
[elseif (viewElement.oclIsTypeOf(views::View))]
[for (v : View | viewElement.oclAsType(views::View))]
	[v.viewDescriptor()/]
[/for]
[elseif (viewElement.oclIsTypeOf(views::ViewReference))][comment just ignore viewReferences /]
[else]
	//TODO FIXME invalid case for template public viewElementDescriptor(viewElement : ViewElement) in module ViewsRepository.mtl, viewElement : [viewElement/]
[/if]
[/template]

[comment 
 Template used to determine the viewRepository's generated file full path
 /]
[template public fullFilePath(repository : ViewsRepository)]
[repository.vrQualifiedClass().toPath()/].java
[/template]